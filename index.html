<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H.CAM | The All-In-One Modular Drone</title>
   
    <!-- Custom Favicon (H Logo) -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 rx=%2220%22 fill=%22%234F46E5%22 /><path d=%22M30 25 V75 M70 25 V75 M30 50 H70%22 stroke=%22white%22 stroke-width=%2215%22 stroke-linecap=%22round%22 /></svg>">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
   
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
   
    <!-- FontAwesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        health: {
                            light: '#fee2e2',
                            DEFAULT: '#ef4444',
                            dark: '#991b1b',
                        },
                        agri: {
                            light: '#dcfce7',
                            DEFAULT: '#22c55e',
                            dark: '#14532d',
                        },
                        manu: {
                            light: '#e0f2fe',
                            DEFAULT: '#0ea5e9',
                            dark: '#0c4a6e',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .hero-bg {
            background-color: #0f172a;
            background-image:
                radial-gradient(at 0% 0%, hsla(253,16%,7%,1) 0, transparent 50%),
                radial-gradient(at 50% 0%, hsla(225,39%,30%,1) 0, transparent 50%),
                radial-gradient(at 100% 0%, hsla(339,49%,30%,1) 0, transparent 50%);
        }
       
        .glass-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
       
        /* Dark mode overrides for glass card */
        .dark .glass-card {
            background: rgba(30, 41, 59, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Dropdown animation */
        #user-dropdown-menu {
            transform-origin: top right;
            transition: all 0.1s ease-out;
        }
        #user-dropdown-menu.hidden {
            opacity: 0;
            transform: scale(0.95);
            pointer-events: none;
            display: block; /* maintain display for transition, hide via opacity */
            visibility: hidden;
        }
        #user-dropdown-menu:not(.hidden) {
            opacity: 1;
            transform: scale(1);
            visibility: visible;
        }
    </style>
</head>
<body class="bg-slate-50 dark:bg-slate-950 text-slate-800 dark:text-slate-200 font-sans transition-colors duration-300">

    <!-- Navigation -->
    <nav class="fixed w-full z-50 bg-white/95 dark:bg-slate-900/95 backdrop-blur-sm shadow-sm dark:shadow-slate-800/50 transition-all duration-300" id="navbar">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <!-- Logo (Static Text) -->
                <div class="flex-shrink-0 flex items-center gap-2 select-none">
                    <div class="w-8 h-8 bg-slate-900 dark:bg-indigo-600 rounded-lg flex items-center justify-center text-white font-bold transition-colors">H</div>
                    <span class="font-bold text-xl tracking-tight text-slate-900 dark:text-white transition-colors">H.<span class="text-manu-DEFAULT">CAM</span></span>
                </div>

                <!-- Desktop Menu -->
                <div class="hidden md:flex space-x-8 items-center">
                    <a href="#about" class="text-slate-600 hover:text-indigo-600 dark:text-slate-300 dark:hover:text-indigo-400 transition font-medium">About Us</a>
                    <a href="#healthcare" class="text-slate-600 hover:text-health-DEFAULT dark:text-slate-300 dark:hover:text-health-400 transition font-medium">Rescue Module</a>
                    <a href="#agriculture" class="text-slate-600 hover:text-agri-DEFAULT dark:text-slate-300 dark:hover:text-agri-400 transition font-medium">Agri Module</a>
                    <a href="#manufacturing" class="text-slate-600 hover:text-manu-DEFAULT dark:text-slate-300 dark:hover:text-manu-400 transition font-medium">Manu Module</a>
                   
                    <!-- Dark Mode Toggle (Desktop) -->
                    <button id="theme-toggle" class="p-2 rounded-full text-slate-600 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800 transition focus:outline-none" aria-label="Toggle Dark Mode">
                        <i class="fas fa-moon dark:hidden"></i>
                        <i class="fas fa-sun hidden dark:block text-yellow-400"></i>
                    </button>

                    <!-- Auth Section (Desktop) -->
                    <div id="auth-container-desktop" class="flex items-center">
                        <button id="login-btn-desktop" class="flex items-center gap-2 text-slate-600 hover:text-indigo-600 dark:text-slate-300 dark:hover:text-white font-medium transition mr-4">
                            <i class="fab fa-google"></i> Sign In
                        </button>
                       
                        <!-- User Avatar (Click to Toggle) -->
                        <div id="user-profile-desktop" class="hidden relative cursor-pointer z-50">
                            <!-- Avatar Button -->
                            <div id="user-avatar-btn" class="w-9 h-9 rounded-full bg-indigo-600 flex items-center justify-center text-white font-bold border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-400 hover:shadow-md transition-all">
                                <i class="fas fa-user"></i>
                            </div>
                           
                            <!-- Dropdown Menu (Click based) -->
                            <div id="user-dropdown-menu" class="hidden absolute right-0 mt-3 w-56 bg-white dark:bg-slate-800 rounded-xl shadow-2xl py-2 border border-slate-100 dark:border-slate-700 ring-1 ring-black ring-opacity-5 focus:outline-none">
                                <div class="px-4 py-3 border-b border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-800/50 rounded-t-xl">
                                    <span class="block text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-1">Signed in as</span>
                                    <span id="profile-name-text" class="block text-sm font-bold text-slate-900 dark:text-white truncate">Benson Ong</span>
                                </div>
                                <div class="py-1">
                                    <a href="#" class="block px-4 py-2 text-sm text-slate-700 dark:text-slate-300 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 hover:text-indigo-600 transition-colors">
                                        <i class="fas fa-cog mr-2 text-slate-400"></i> Settings
                                    </a>
                                    <a href="#" id="logout-btn-desktop" class="block px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors">
                                        <i class="fas fa-sign-out-alt mr-2"></i> Sign Out
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <a href="#contact" class="px-5 py-2.5 rounded-full bg-slate-900 dark:bg-indigo-600 text-white font-medium hover:bg-slate-700 dark:hover:bg-indigo-700 transition shadow-lg hover:shadow-xl transform hover:-translate-y-0.5">Get Drone</a>
                </div>

                <!-- Mobile Menu Button -->
                <div class="md:hidden flex items-center gap-4">
                    <!-- Mobile Dark Mode Toggle -->
                    <button id="mobile-theme-toggle" class="p-2 rounded-full text-slate-600 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800 transition focus:outline-none" aria-label="Toggle Dark Mode">
                        <i class="fas fa-moon dark:hidden"></i>
                        <i class="fas fa-sun hidden dark:block text-yellow-400"></i>
                    </button>
                   
                    <button id="mobile-menu-btn" class="text-slate-600 hover:text-slate-900 dark:text-slate-300 dark:hover:text-white focus:outline-none">
                        <i class="fas fa-bars text-2xl"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Menu Panel -->
        <div id="mobile-menu" class="hidden md:hidden bg-white dark:bg-slate-900 border-t border-slate-100 dark:border-slate-800 absolute w-full">
            <div class="px-4 pt-2 pb-6 space-y-2 shadow-lg">
                <a href="#about" class="block px-3 py-3 rounded-md text-base font-medium text-slate-700 dark:text-slate-200 hover:bg-indigo-50 dark:hover:bg-slate-800 hover:text-indigo-600">About Us</a>
                <a href="#healthcare" class="block px-3 py-3 rounded-md text-base font-medium text-slate-700 dark:text-slate-200 hover:bg-red-50 dark:hover:bg-red-900/30 hover:text-health-DEFAULT">Rescue Config</a>
                <a href="#agriculture" class="block px-3 py-3 rounded-md text-base font-medium text-slate-700 dark:text-slate-200 hover:bg-green-50 dark:hover:bg-green-900/30 hover:text-agri-DEFAULT">Agri Config</a>
                <a href="#manufacturing" class="block px-3 py-3 rounded-md text-base font-medium text-slate-700 dark:text-slate-200 hover:bg-blue-50 dark:hover:bg-blue-900/30 hover:text-manu-DEFAULT">Manu Config</a>
                <button id="login-btn-mobile" class="w-full text-left block px-3 py-3 rounded-md text-base font-medium text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-800">
                    <i class="fab fa-google mr-2"></i> Sign In
                </button>
                <button id="logout-btn-mobile" class="hidden w-full text-left block px-3 py-3 rounded-md text-base font-medium text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20">
                    Sign Out
                </button>
                <a href="#contact" class="block px-3 py-3 rounded-md text-base font-medium bg-slate-900 dark:bg-indigo-600 text-white text-center mt-4">Order Unit</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="relative pt-32 pb-20 lg:pt-48 lg:pb-32 overflow-hidden hero-bg text-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 text-center">
            <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-slate-800/50 border border-slate-700 text-sm font-medium text-slate-300 mb-8 animate-fade-in-up">
                <span class="w-2 h-2 rounded-full bg-purple-500 animate-pulse"></span>
                H.CAM: The Universal Frame
            </div>
            <h1 class="text-4xl md:text-6xl lg:text-7xl font-bold tracking-tight mb-6 leading-tight">
                One Drone. <br class="hidden md:block" />
                <span class="bg-clip-text text-transparent bg-gradient-to-r from-red-400 via-green-400 to-blue-400">Three Critical Worlds.</span>
            </h1>
            <p class="mt-4 max-w-2xl mx-auto text-xl text-slate-300 mb-10">
                Meet the <strong>H.CAM</strong>. A single, modular autonomous drone that instantly adapts from heavy-lift rescue to precision farming and industrial logistics.
            </p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <a href="#contact" class="px-8 py-4 rounded-full bg-white text-slate-900 font-bold hover:bg-slate-100 transition shadow-lg hover:shadow-white/20">Configure Your H.CAM</a>
                <a href="#solutions" class="px-8 py-4 rounded-full bg-slate-800/50 border border-slate-700 text-white font-semibold hover:bg-slate-800 transition backdrop-blur-sm">See Modules</a>
            </div>
        </div>

        <!-- Decorative Elements -->
        <div class="absolute top-1/2 left-0 w-64 h-64 bg-purple-500/10 rounded-full blur-3xl -translate-y-1/2"></div>
        <div class="absolute bottom-0 right-0 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl translate-y-1/4"></div>
    </section>

    <!-- Overview / Stats -->
    <div class="bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 transition-colors duration-300" id="solutions">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-16 relative z-20">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Health Card -->
                <div class="glass-card p-8 rounded-2xl shadow-xl hover:shadow-2xl transition duration-300 border-t-4 border-t-health-DEFAULT group">
                    <div class="w-12 h-12 bg-red-100 dark:bg-red-900/50 rounded-lg flex items-center justify-center mb-6 group-hover:scale-110 transition">
                        <i class="fas fa-heart-pulse text-2xl text-health-DEFAULT"></i>
                    </div>
                    <h3 class="text-xl font-bold text-slate-900 dark:text-white mb-1">Rescue Module</h3>
                    <div class="text-2xl font-bold text-slate-700 dark:text-slate-300 mb-2">RM 6,500</div>
                    <p class="text-slate-600 dark:text-slate-400 mb-4">Snap on the Medical Bay & Winch for emergency evac.</p>
                    <a href="#healthcare" class="text-health-DEFAULT font-semibold flex items-center gap-2 group-hover:gap-3 transition-all">
                        See Config <i class="fas fa-arrow-right text-sm"></i>
                    </a>
                </div>

                <!-- Agri Card -->
                <div class="glass-card p-8 rounded-2xl shadow-xl hover:shadow-2xl transition duration-300 border-t-4 border-t-agri-DEFAULT group">
                    <div class="w-12 h-12 bg-green-100 dark:bg-green-900/50 rounded-lg flex items-center justify-center mb-6 group-hover:scale-110 transition">
                        <i class="fas fa-seedling text-2xl text-agri-DEFAULT"></i>
                    </div>
                    <h3 class="text-xl font-bold text-slate-900 dark:text-white mb-1">Agri Module</h3>
                    <div class="text-2xl font-bold text-slate-700 dark:text-slate-300 mb-2">RM 4,500</div>
                    <p class="text-slate-600 dark:text-slate-400 mb-4">Attach the Sprayer & Spectral Cam for crop management.</p>
                    <a href="#agriculture" class="text-agri-DEFAULT font-semibold flex items-center gap-2 group-hover:gap-3 transition-all">
                        See Config <i class="fas fa-arrow-right text-sm"></i>
                    </a>
                </div>

                <!-- Manu Card -->
                <div class="glass-card p-8 rounded-2xl shadow-xl hover:shadow-2xl transition duration-300 border-t-4 border-t-manu-DEFAULT group">
                    <div class="w-12 h-12 bg-blue-100 dark:bg-blue-900/50 rounded-lg flex items-center justify-center mb-6 group-hover:scale-110 transition">
                        <i class="fas fa-industry text-2xl text-manu-DEFAULT"></i>
                    </div>
                    <h3 class="text-xl font-bold text-slate-900 dark:text-white mb-1">Manu Module</h3>
                    <div class="text-2xl font-bold text-slate-700 dark:text-slate-300 mb-2">RM 5,500</div>
                    <p class="text-slate-600 dark:text-slate-400 mb-4">Equip the Gripper Claw for indoor factory logistics.</p>
                    <a href="#manufacturing" class="text-manu-DEFAULT font-semibold flex items-center gap-2 group-hover:gap-3 transition-all">
                        See Config <i class="fas fa-arrow-right text-sm"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- NEW: System Specifications & Requirements -->
    <section class="py-16 bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 transition-colors duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-slate-900 dark:text-white">System Specifications</h2>
                <p class="text-slate-600 dark:text-slate-400 mt-2">Technical data and operational prerequisites for the H.CAM Universal Frame.</p>
            </div>
           
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Weight & Dimensions -->
                <div class="bg-slate-50 dark:bg-slate-800 p-8 rounded-2xl border border-slate-200 dark:border-slate-700 hover:shadow-lg transition-all duration-300">
                    <h3 class="text-xl font-bold text-slate-800 dark:text-white mb-6 flex items-center">
                        <i class="fas fa-scale-balanced text-indigo-600 dark:text-indigo-400 mr-3"></i> Weight & Build
                    </h3>
                    <ul class="space-y-4 divide-y divide-slate-200 dark:divide-slate-700">
                        <li class="flex justify-between pt-2">
                            <span class="text-slate-600 dark:text-slate-400">Base Airframe Weight</span>
                            <span class="font-mono font-bold text-slate-900 dark:text-white">4.2 kg</span>
                        </li>
                        <li class="flex justify-between pt-4">
                            <span class="text-slate-600 dark:text-slate-400">Max Payload Capacity</span>
                            <span class="font-mono font-bold text-slate-900 dark:text-white">15.0 kg</span>
                        </li>
                        <li class="flex justify-between pt-4">
                            <span class="text-slate-600 dark:text-slate-400">Max Takeoff Weight (MTOW)</span>
                            <span class="font-mono font-bold text-slate-900 dark:text-white">19.2 kg</span>
                        </li>
                        <li class="flex justify-between pt-4 pb-2">
                            <span class="text-slate-600 dark:text-slate-400">Frame Material</span>
                            <span class="font-mono font-bold text-slate-900 dark:text-white text-right">Aerospace Grade<br>Carbon Fiber</span>
                        </li>
                    </ul>
                </div>

                <!-- Operational Requirements -->
                <div class="bg-slate-50 dark:bg-slate-800 p-8 rounded-2xl border border-slate-200 dark:border-slate-700 hover:shadow-lg transition-all duration-300">
                    <h3 class="text-xl font-bold text-slate-800 dark:text-white mb-6 flex items-center">
                        <i class="fas fa-clipboard-check text-indigo-600 dark:text-indigo-400 mr-3"></i> What You Need
                    </h3>
                    <ul class="space-y-6">
                        <li class="flex items-start">
                            <div class="flex-shrink-0 w-8 h-8 rounded-full bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center mt-1">
                                <i class="fas fa-id-card text-indigo-600 dark:text-indigo-400"></i>
                            </div>
                            <div class="ml-4">
                                <strong class="block text-slate-900 dark:text-white">Operator Certification</strong>
                                <span class="text-sm text-slate-600 dark:text-slate-400">Requires Commercial Drone License (e.g., FAA Part 107 or local equivalent) due to weight class.</span>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <div class="flex-shrink-0 w-8 h-8 rounded-full bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center mt-1">
                                <i class="fas fa-wifi text-indigo-600 dark:text-indigo-400"></i>
                            </div>
                            <div class="ml-4">
                                <strong class="block text-slate-900 dark:text-white">Connectivity</strong>
                                <span class="text-sm text-slate-600 dark:text-slate-400">Active 4G/5G connection for cloud AI features, or Local RF Base Station (included) for manual control.</span>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <div class="flex-shrink-0 w-8 h-8 rounded-full bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center mt-1">
                                <i class="fas fa-bolt text-indigo-600 dark:text-indigo-400"></i>
                            </div>
                            <div class="ml-4">
                                <strong class="block text-slate-900 dark:text-white">Power Infrastructure</strong>
                                <span class="text-sm text-slate-600 dark:text-slate-400">Standard 110V/220V outlet required for the H.CAM Supercharger Hub.</span>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Healthcare Section -->
    <section id="healthcare" class="py-24 bg-slate-50 dark:bg-slate-950 relative overflow-hidden transition-colors duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="lg:grid lg:grid-cols-2 lg:gap-16 items-center">
                <div class="mb-12 lg:mb-0">
                    <div class="inline-block px-3 py-1 bg-red-100 dark:bg-red-900/50 text-health-dark dark:text-red-300 rounded-full text-sm font-bold mb-4">
                        <i class="fas fa-kit-medical mr-2"></i> H.CAM CONFIG: RED
                    </div>
                    <h2 class="text-3xl md:text-4xl font-bold text-slate-900 dark:text-white mb-6">Module 1: <br>Rescue & Critical Care</h2>
                    <p class="text-lg text-slate-600 dark:text-slate-400 mb-6">
                        The H.CAM transforms into a lifesaver. By attaching the <strong>Red Module</strong>, the drone activates high-torque lift mode to carry supplies, locate victims with thermal sensors, and even hoist injured personnel.
                    </p>
                    <ul class="space-y-4 mb-8">
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-health-DEFAULT mt-1 mr-3"></i>
                            <span class="text-slate-700 dark:text-slate-300"><strong>Heavy-Lift Winch:</strong> Snaps onto the undercarriage to lift up to 120kg.</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-health-DEFAULT mt-1 mr-3"></i>
                            <span class="text-slate-700 dark:text-slate-300"><strong>Thermal Pod:</strong> Swappable nose-cone camera for heat signature detection.</span>
                        </li>
                    </ul>

                    <!-- New Example Added -->
                    <div class="mb-6 bg-red-50 dark:bg-red-900/20 p-4 rounded-lg border border-red-100 dark:border-red-900/50">
                        <h4 class="font-bold text-health-dark dark:text-red-300 text-xs uppercase mb-1"><i class="fas fa-bolt mr-1"></i> Live Deployment: Project Alpine</h4>
                        <p class="text-sm text-slate-700 dark:text-slate-300 mb-2">One H.CAM drone located hikers using Thermal, then dropped a survival kit using the winch.</p>
                        <div class="flex items-center gap-3 text-xs font-mono text-red-800 dark:text-red-300 bg-red-100/50 dark:bg-red-900/50 p-2 rounded border border-red-200 dark:border-red-800">
                            <span><i class="fas fa-stopwatch mr-1"></i> Flight: 45m (Heavy Load)</span>
                            <span class="text-red-300 dark:text-red-500">|</span>
                            <span><i class="fas fa-charging-station mr-1"></i> Charge: 12m (Hot Swap)</span>
                        </div>
                    </div>

                    <button onclick="openSpecs('rescue')" class="bg-white dark:bg-slate-800 border-2 border-health-DEFAULT text-health-DEFAULT px-6 py-3 rounded-lg font-semibold hover:bg-health-DEFAULT hover:text-white transition">
                        View Rescue Specs
                    </button>
                </div>
                <div class="relative">
                    <!-- Decorative BG -->
                    <div class="absolute -inset-4 bg-red-200/50 dark:bg-red-900/30 rounded-xl transform rotate-3"></div>
                    <!-- Actual Image -->
                    <div class="relative rounded-xl overflow-hidden shadow-2xl h-80 md:h-96 group">
                        <img src="https://images.unsplash.com/photo-1524143986875-f5505dc36b51?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80"
                             alt="Rescue Drone Operation"
                             class="w-full h-full object-cover transform transition duration-700 group-hover:scale-110"
                             onerror="this.src='https://placehold.co/600x400/ef4444/ffffff?text=Rescue+Drone+Feed'">
                       
                        <!-- Overlay UI -->
                        <div class="absolute inset-0 bg-gradient-to-t from-slate-900/90 to-transparent flex flex-col justify-end p-6">
                            <div class="flex items-center gap-3 mb-2">
                                <div class="w-2 h-2 rounded-full bg-red-500 animate-pulse"></div>
                                <span class="text-red-400 font-mono text-xs uppercase tracking-widest">Live Feed: Alpine Sector 4</span>
                            </div>
                            <p class="text-white font-medium text-sm">Thermal lock established. Winch deploying payload...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Agriculture Section -->
    <section id="agriculture" class="py-24 bg-white dark:bg-slate-900 relative transition-colors duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="lg:grid lg:grid-cols-2 lg:gap-16 items-center">
                <div class="order-2 lg:order-1 relative">
                     <!-- Decorative BG -->
                     <div class="absolute -inset-4 bg-green-200/50 dark:bg-green-900/30 rounded-xl transform -rotate-3"></div>
                     <!-- Actual Image -->
                     <div class="relative rounded-xl overflow-hidden shadow-2xl h-80 md:h-96 group">
                        <img src="https://plus.unsplash.com/premium_photo-1664302152998-3850cb88e5df?q=80&w=1000&auto=format&fit=crop"
                             alt="Agricultural Drone Spraying"
                             class="w-full h-full object-cover transform transition duration-700 group-hover:scale-110"
                             onerror="this.src='https://placehold.co/600x400/22c55e/ffffff?text=Agri+Drone+Feed'">

                        <!-- Overlay UI -->
                        <div class="absolute inset-0 bg-gradient-to-t from-emerald-900/90 to-transparent flex flex-col justify-end p-6">
                             <div class="grid grid-cols-2 gap-4 mb-2">
                                   <div class="bg-black/30 p-2 rounded backdrop-blur border border-white/10">
                                       <div class="text-xl font-bold text-green-400">98%</div>
                                       <div class="text-[10px] text-white uppercase">Health Index</div>
                                   </div>
                                   <div class="bg-black/30 p-2 rounded backdrop-blur border border-white/10">
                                       <div class="text-xl font-bold text-green-400">Active</div>
                                       <div class="text-[10px] text-white uppercase">Spray Nozzles</div>
                                   </div>
                               </div>
                        </div>
                    </div>
                </div>
                <div class="order-1 lg:order-2 mb-12 lg:mb-0">
                    <div class="inline-block px-3 py-1 bg-green-100 dark:bg-green-900/50 text-agri-dark dark:text-green-300 rounded-full text-sm font-bold mb-4">
                        <i class="fas fa-leaf mr-2"></i> H.CAM CONFIG: GREEN
                    </div>
                    <h2 class="text-3xl md:text-4xl font-bold text-slate-900 dark:text-white mb-6">Module 2: <br>Precision Agriculture</h2>
                    <p class="text-lg text-slate-600 dark:text-slate-400 mb-6">
                        Swap the rescue winch for the <strong>Green Array</strong>. The H.CAM instantly becomes an agri-bot, equipped with multispectral cameras for crop analysis and precision spray nozzles for targeted treatment.
                    </p>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8">
                        <div class="p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-100 dark:border-green-900/50">
                            <h4 class="font-bold text-slate-800 dark:text-white mb-1"><i class="fas fa-eye text-agri-DEFAULT mr-2"></i>Spectral Payload</h4>
                            <p class="text-sm text-slate-600 dark:text-slate-400">Snap-on camera detects plant health from the air.</p>
                        </div>
                        <div class="p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-100 dark:border-green-900/50">
                            <h4 class="font-bold text-slate-800 dark:text-white mb-1"><i class="fas fa-tint text-agri-DEFAULT mr-2"></i>Spray Tank</h4>
                            <p class="text-sm text-slate-600 dark:text-slate-400">Under-mount tank for automated watering.</p>
                        </div>
                    </div>

                    <!-- New Example Added -->
                    <div class="mb-6 bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-100 dark:border-green-900/50">
                         <h4 class="font-bold text-agri-dark dark:text-green-300 text-xs uppercase mb-1"><i class="fas fa-chart-line mr-1"></i> Live Deployment: Napa Valley</h4>
                        <p class="text-sm text-slate-700 dark:text-slate-300 mb-2">The H.CAM mapped 500 acres, then swapped to "Spray Mode" to treat specific vines.</p>
                        <div class="flex items-center gap-3 text-xs font-mono text-green-800 dark:text-green-300 bg-green-100/50 dark:bg-green-900/50 p-2 rounded border border-green-200 dark:border-green-800">
                            <span><i class="fas fa-sun mr-1"></i> Flight: 60m (Solar Wing Ext)</span>
                            <span class="text-green-300 dark:text-green-500">|</span>
                            <span><i class="fas fa-plug mr-1"></i> Charge: 3 Hours</span>
                        </div>
                    </div>

                    <button onclick="openSpecs('agri')" class="bg-white dark:bg-slate-800 border-2 border-agri-DEFAULT text-agri-DEFAULT px-6 py-3 rounded-lg font-semibold hover:bg-agri-DEFAULT hover:text-white transition">
                        View Agri Specs
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Manufacturing Section -->
    <section id="manufacturing" class="py-24 bg-slate-50 dark:bg-slate-950 relative transition-colors duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="lg:grid lg:grid-cols-2 lg:gap-16 items-center">
                <div class="mb-12 lg:mb-0">
                    <div class="inline-block px-3 py-1 bg-blue-100 dark:bg-blue-900/50 text-manu-dark dark:text-blue-300 rounded-full text-sm font-bold mb-4">
                        <i class="fas fa-cogs mr-2"></i> H.CAM CONFIG: BLUE
                    </div>
                    <h2 class="text-3xl md:text-4xl font-bold text-slate-900 dark:text-white mb-6">Module 3: <br>Smart Factory Logistics</h2>
                    <p class="text-lg text-slate-600 dark:text-slate-400 mb-6">
                        Bring the H.CAM indoors. With the <strong>Blue Module</strong>, the drone attaches a robotic gripper claw and engages indoor LiDAR navigation. It flies parts through rafters, bypassing floor traffic.
                    </p>
                    <ul class="space-y-4 mb-8">
                        <li class="flex items-start">
                            <div class="flex-shrink-0 h-6 w-6 rounded-full bg-manu-DEFAULT flex items-center justify-center text-white text-xs mt-1">1</div>
                            <span class="ml-4 text-slate-700 dark:text-slate-300"><strong>Robotic Claw:</strong> Attaches to the base for picking up factory parts (up to 15kg).</span>
                        </li>
                        <li class="flex items-start">
                            <div class="flex-shrink-0 h-6 w-6 rounded-full bg-manu-DEFAULT flex items-center justify-center text-white text-xs mt-1">2</div>
                            <span class="ml-4 text-slate-700 dark:text-slate-300"><strong>Indoor LiDAR:</strong> Enables cm-accurate flight inside buildings without GPS.</span>
                        </li>
                    </ul>

                    <!-- New Example Added -->
                    <div class="mb-6 bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-100 dark:border-blue-900/50">
                         <h4 class="font-bold text-manu-dark dark:text-blue-300 text-xs uppercase mb-1"><i class="fas fa-microchip mr-1"></i> Live Deployment: EV Plant</h4>
                        <p class="text-sm text-slate-700 dark:text-slate-300 mb-2">H.CAM drones moved battery cells between assembly lines 40% faster than floor robots.</p>
                        <div class="flex items-center gap-3 text-xs font-mono text-blue-800 dark:text-blue-300 bg-blue-100/50 dark:bg-blue-900/50 p-2 rounded border border-blue-200 dark:border-blue-800">
                            <span><i class="fas fa-infinity mr-1"></i> Flight: 24/7 (Docking)</span>
                            <span class="text-blue-300 dark:text-blue-500">|</span>
                            <span><i class="fas fa-wifi mr-1"></i> Charge: Wireless Rafter Dock</span>
                        </div>
                    </div>

                    <button onclick="openSpecs('manu')" class="bg-white dark:bg-slate-800 border-2 border-manu-DEFAULT text-manu-DEFAULT px-6 py-3 rounded-lg font-semibold hover:bg-manu-DEFAULT hover:text-white transition">
                        View Manu Specs
                    </button>
                </div>
                <div class="relative">
                     <!-- Decorative BG -->
                     <div class="absolute -inset-4 bg-blue-200/50 dark:bg-blue-900/30 rounded-xl transform rotate-3"></div>
                     <!-- Actual Image -->
                     <div class="relative rounded-xl overflow-hidden shadow-2xl h-80 md:h-96 group">
                        <img src="https://images.unsplash.com/photo-1565514020176-db922f305c45?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80"
                             alt="Warehouse Robotics"
                             class="w-full h-full object-cover transform transition duration-700 group-hover:scale-110"
                             onerror="this.src='https://placehold.co/600x400/0ea5e9/ffffff?text=Factory+Drone+Feed'">
                       
                        <!-- Overlay UI -->
                        <div class="absolute inset-0 bg-gradient-to-t from-slate-900/90 to-transparent flex flex-col justify-end p-6">
                            <div class="h-1 bg-slate-700 rounded-full overflow-hidden mb-3">
                                <div class="h-full bg-blue-500 w-3/4 animate-pulse"></div>
                            </div>
                            <div class="flex justify-between text-xs text-blue-300 font-mono">
                                <span>MOD: GRIPPER CLAW</span>
                                <span>LIDAR: MAPPING</span>
                            </div>
                        </div>
                     </div>
                </div>
            </div>
        </div>
    </section>

    <!-- NEW: About Us Section -->
    <section id="about" class="py-24 bg-white dark:bg-slate-900 relative transition-colors duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h2 class="text-3xl md:text-4xl font-bold text-slate-900 dark:text-white mb-6">About H.CAM</h2>
            <p class="text-lg text-slate-600 dark:text-slate-400 leading-relaxed">
                H.CAM is a kind of product that helps people.
            </p>
            <p class="text-lg text-slate-600 dark:text-slate-400 leading-relaxed mt-4">
                We currently have three members to build amazing product
            </p>
            <p class="text-lg text-slate-600 dark:text-slate-400 leading-relaxed mt-2">
                The three member are:
            </p>
            <p class="text-lg text-slate-900 dark:text-white font-semibold leading-relaxed mt-2">
                'Benson Ong Jia Hao', 'Jedi Ung Zi Yo', and 'Lam Yoong Seng'
            </p>
        </div>
    </section>

    <!-- NEW: AI Q&A Section -->
    <section id="ai-hub" class="py-20 bg-slate-800 dark:bg-slate-950 border-t border-slate-700 dark:border-slate-900 relative overflow-hidden transition-colors duration-300">
        <!-- Background Elements -->
        <div class="absolute top-0 left-0 w-full h-full overflow-hidden z-0 opacity-20">
            <div class="absolute top-10 left-10 w-64 h-64 bg-blue-500 rounded-full blur-3xl mix-blend-screen animate-pulse"></div>
            <div class="absolute bottom-10 right-10 w-64 h-64 bg-green-500 rounded-full blur-3xl mix-blend-screen animate-pulse" style="animation-delay: 1s;"></div>
        </div>

        <div class="max-w-4xl mx-auto px-4 relative z-10">
            <div class="text-center mb-10">
                <div class="inline-flex items-center gap-2 px-3 py-1 bg-indigo-500/20 text-indigo-300 rounded-full text-xs font-bold uppercase tracking-wider mb-4 border border-indigo-500/30">
                    <i class="fas fa-brain"></i> H.CAM Intelligence Hub
                </div>
                <h2 class="text-3xl font-bold text-white mb-4">Questions about the H.CAM?</h2>
                <p class="text-slate-400">Ask our AI how one drone handles three different industries.</p>
            </div>

            <div class="bg-slate-900/80 backdrop-blur-md rounded-2xl p-6 border border-slate-600 shadow-2xl">
                <div class="flex flex-col md:flex-row gap-4 mb-4">
                    <select id="aiTopic" class="bg-slate-800 text-white border border-slate-600 rounded-lg px-4 py-3 focus:outline-none focus:border-indigo-500 md:w-1/3">
                        <option value="General H.CAM Info">General H.CAM Info</option>
                        <option value="Rescue Module">Rescue Configuration</option>
                        <option value="Agriculture Module">Agri Configuration</option>
                        <option value="Manufacturing Module">Manu Configuration</option>
                    </select>
                    <input type="text" id="aiQuestion" class="flex-1 bg-slate-800 text-white border border-slate-600 rounded-lg px-4 py-3 focus:outline-none focus:border-indigo-500" placeholder="E.g., How long does it take to swap the rescue winch for the sprayer?">
                    <button onclick="askTriCoreAI()" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold px-6 py-3 rounded-lg transition shadow-lg flex items-center justify-center gap-2">
                        <i class="fas fa-paper-plane"></i> Ask AI
                    </button>
                </div>

                <!-- AI Q&A Response Area -->
                <div id="aiQAResponse" class="hidden mt-4 p-5 bg-indigo-900/20 border border-indigo-500/30 rounded-xl">
                    <div class="flex items-start gap-3">
                        <div class="mt-1 flex-shrink-0 w-8 h-8 bg-indigo-600 rounded-full flex items-center justify-center text-white text-xs font-bold">AI</div>
                        <div class="flex-1">
                            <h4 class="text-indigo-300 text-sm font-bold mb-1 uppercase">H.CAM Answer</h4>
                            <p id="aiQAText" class="text-slate-300 text-sm leading-relaxed"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-24 bg-slate-900 dark:bg-black text-white transition-colors duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-3xl md:text-4xl font-bold mb-4">Order Your H.CAM</h2>
                <p class="text-slate-400 max-w-2xl mx-auto">Tell us what modules you need. Our <span class="text-blue-400 font-bold">AI Architect</span> can check if the H.CAM works for your specific mission.</p>
            </div>

            <div class="max-w-3xl mx-auto bg-slate-800 dark:bg-slate-900 rounded-2xl p-8 md:p-12 shadow-2xl border border-slate-700">
                <form id="contactForm" onsubmit="event.preventDefault(); handleFormSubmit();">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label class="block text-sm font-medium text-slate-300 mb-2">Full Name</label>
                            <input type="text" id="userName" class="w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500" placeholder="Benson Ong" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-300 mb-2">Email Address</label>
                            <input type="email" id="userEmail" class="w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500" placeholder="benson@company.com" required>
                        </div>
                    </div>
                   
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-slate-300 mb-2">Primary Module Needed</label>
                        <select id="industrySector" class="w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500">
                            <option>Rescue Module (Red) - RM 6,500</option>
                            <option>Agriculture Module (Green) - RM 4,500</option>
                            <option>Manufacturing Module (Blue) - RM 5,500</option>
                            <option>All Modules (H.CAM Ultra) - RM 15,500</option>
                        </select>
                    </div>

                    <div class="mb-8">
                        <label class="block text-sm font-medium text-slate-300 mb-2">Mission Details (AI Analysis Available)</label>
                        <textarea id="projectDetails" rows="4" class="w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500" placeholder="Describe your mission. E.g., 'I need the drone to map a cornfield and then deliver spare parts to a tractor...'"></textarea>
                    </div>

                    <div class="flex flex-col sm:flex-row gap-4">
                        <button type="button" onclick="analyzeProject()" class="flex-1 bg-slate-700 border border-slate-600 text-blue-300 font-bold py-4 rounded-lg hover:bg-slate-600 hover:text-white transition shadow-lg flex justify-center items-center gap-2">
                            <i class="fas fa-microchip"></i> AI Feasibility Check
                        </button>
                        <button type="submit" class="flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold py-4 rounded-lg hover:from-blue-700 hover:to-indigo-700 transition transform hover:-translate-y-1 shadow-lg">
                            Send Request
                        </button>
                    </div>
                </form>

                <!-- AI Response Container -->
                <div id="aiResponseContainer" class="hidden mt-8 p-6 bg-slate-900/50 rounded-xl border border-blue-500/30">
                    <div class="flex items-center gap-3 mb-4">
                        <i class="fas fa-robot text-blue-400 text-xl"></i>
                        <h3 class="text-blue-400 font-bold uppercase text-sm tracking-wider">H.CAM Technical Report</h3>
                    </div>
                    <div id="aiResponseText" class="prose prose-invert prose-sm max-w-none text-slate-300">
                        <!-- AI content will populate here -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-slate-950 dark:bg-black text-slate-400 py-12 border-t border-slate-900 dark:border-slate-800 transition-colors duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
                <div class="col-span-1 md:col-span-1">
                    <div class="text-white font-bold text-xl tracking-tight hover:text-blue-400 transition duration-200 inline-block">H.<span class="text-blue-500">CAM</span></div>
                    <p class="mt-4 text-sm">Innovating the physical world through a single, modular autonomous platform.</p>
                </div>
                <div>
                    <h4 class="text-white font-semibold mb-4">Modules</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#" class="hover:text-white transition">Rescue Config</a></li>
                        <li><a href="#" class="hover:text-white transition">Agri Config</a></li>
                        <li><a href="#" class="hover:text-white transition">Manu Config</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-white font-semibold mb-4">Company</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#" class="hover:text-white transition">About Us</a></li>
                        <li><a href="#" class="hover:text-white transition">Careers</a></li>
                        <li><a href="#" class="hover:text-white transition">News & Press</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-white font-semibold mb-4">Contact</h4>
                    <div class="flex space-x-4">
                        <a href="https://x.com/HCAM_Offical" target="_blank" class="hover:text-white transition"><i class="fab fa-twitter text-xl"></i></a>
                        <a href="https://www.instagram.com/hcam_official/" target="_blank" class="hover:text-white transition"><i class="fab fa-instagram text-xl"></i></a>
                        <a href="https://www.reddit.com/user/HCAM_Official/" target="_blank" class="hover:text-white transition"><i class="fab fa-reddit text-xl"></i></a>
                    </div>
                </div>
            </div>
            <div class="pt-8 border-t border-slate-900 text-center text-xs">
                &copy; 2025 H.CAM. All rights reserved.
            </div>
        </div>
    </footer>

    <!-- Specs Modal -->
    <div id="specsModal" class="fixed inset-0 z-[60] hidden overflow-y-auto" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <!-- Background overlay -->
            <div class="fixed inset-0 bg-gray-900 bg-opacity-80 transition-opacity backdrop-blur-sm" aria-hidden="true" onclick="closeModal()"></div>

            <!-- Centering spacer -->
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>

            <!-- Modal panel -->
            <div class="relative inline-block align-bottom bg-slate-900 rounded-lg text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg w-full border border-slate-700">
                <div class="bg-slate-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <div class="sm:flex sm:items-start">
                        <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full">
                            <h3 class="text-xl leading-6 font-bold text-white mb-4" id="modal-title">Specification Data</h3>
                            <div class="mt-4 p-4 bg-slate-900/50 rounded-lg border border-slate-700" id="modal-content">
                                <!-- Dynamic Content -->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bg-slate-900 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse border-t border-slate-800">
                    <button type="button" class="w-full inline-flex justify-center rounded-md border border-slate-600 shadow-sm px-4 py-2 bg-slate-800 text-base font-medium text-white hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm transition" onclick="closeModal()">
                        Close Data Feed
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js';
        import { getAuth, signInWithCustomToken, signInAnonymously, onAuthStateChanged, signOut } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js';

        // --- SECURITY CONFIGURATION ---
        const GROQ_API_KEY = "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"; // Directly using the key you provided

        // UI Elements
        const loginBtnDesktop = document.getElementById('login-btn-desktop');
        const userProfileDesktop = document.getElementById('user-profile-desktop');
        const userDropdownMenu = document.getElementById('user-dropdown-menu'); // Added
        const userAvatarBtn = document.getElementById('user-avatar-btn'); // Added
        const logoutBtnDesktop = document.getElementById('logout-btn-desktop');
        const loginBtnMobile = document.getElementById('login-btn-mobile');
        const logoutBtnMobile = document.getElementById('logout-btn-mobile');
        const profileNameText = document.getElementById('profile-name-text'); // Changed from display query selector

        // Firebase Configuration & Initialization with Error Handling
        let auth = null;
        try {
            const configStr = typeof __firebase_config !== 'undefined' ? __firebase_config : '{}';
            const firebaseConfig = JSON.parse(configStr);
           
            // Only initialize if config has keys (is valid)
            if (Object.keys(firebaseConfig).length > 0) {
                const app = initializeApp(firebaseConfig);
                auth = getAuth(app);
            } else {
                console.warn("Firebase configuration missing. Running in UI-only Demo Mode.");
            }
        } catch (e) {
            console.warn("Error initializing Firebase. Running in UI-only Demo Mode.", e);
        }

        // --- AUTHENTICATION LOGIC ---

        function updateUI(isSignedIn) {
            if (isSignedIn) {
                // User is signed in
                loginBtnDesktop.classList.add('hidden');
                userProfileDesktop.classList.remove('hidden');
               
                loginBtnMobile.classList.add('hidden');
                logoutBtnMobile.classList.remove('hidden');
               
                // Update profile text
                if(profileNameText) profileNameText.textContent = "Benson Ong"; // Or fetch from user obj if available
            } else {
                // User is signed out
                loginBtnDesktop.classList.remove('hidden');
                userProfileDesktop.classList.add('hidden');
                // Ensure dropdown is hidden on logout
                if(userDropdownMenu) userDropdownMenu.classList.add('hidden');
               
                loginBtnMobile.classList.remove('hidden');
                logoutBtnMobile.classList.add('hidden');
            }
        }

        async function handleLogin() {
            // 1. Try Real Firebase Auth
            if (auth) {
                try {
                    if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                        await signInWithCustomToken(auth, __initial_auth_token);
                    } else {
                        await signInAnonymously(auth);
                    }
                    // onAuthStateChanged will handle the UI update
                    return;
                } catch (error) {
                    console.error("Auth failed, falling back to demo mode:", error);
                }
            }
           
            // 2. Fallback to Demo Mode (Simulated Login)
            // This runs if auth is null OR if auth failed
            localStorage.setItem('hcam_demo_user', 'true');
            updateUI(true);
            alert("Signed in successfully (Demo Mode: Benson Ong)");
        }

        async function handleLogout() {
            // 1. Try Real Firebase Logout
            if (auth) {
                try {
                    await signOut(auth);
                } catch(e) { console.error(e); }
            }
           
            // 2. Clear Demo Mode
            localStorage.removeItem('hcam_demo_user');
            updateUI(false);
        }

        // --- EVENT LISTENERS ---

        // 1. Dropdown Toggle Logic (Click instead of Hover)
        if (userAvatarBtn && userDropdownMenu) {
            userAvatarBtn.addEventListener('click', (e) => {
                e.stopPropagation(); // Stop click from reaching document
                userDropdownMenu.classList.toggle('hidden');
            });

            // Close when clicking outside
            document.addEventListener('click', (e) => {
                if (!userProfileDesktop.contains(e.target)) {
                    userDropdownMenu.classList.add('hidden');
                }
            });

            // Stop clicks inside menu from closing it immediately
            userDropdownMenu.addEventListener('click', (e) => {
                e.stopPropagation();
            });
        }

        loginBtnDesktop.addEventListener('click', handleLogin);
        loginBtnMobile.addEventListener('click', handleLogin);
       
        if(logoutBtnDesktop) {
            logoutBtnDesktop.addEventListener('click', (e) => {
                e.preventDefault();
                handleLogout();
            });
        }
       
        logoutBtnMobile.addEventListener('click', handleLogout);

        // --- INITIALIZATION ---

        // 1. Check Real Auth State
        if (auth) {
            onAuthStateChanged(auth, (user) => {
                if (user) {
                    updateUI(true);
                    // Clear demo flag if real auth works to avoid conflicts
                    localStorage.removeItem('hcam_demo_user');
                } else {
                    // Only show logged out if demo mode isn't active
                    if (!localStorage.getItem('hcam_demo_user')) {
                        updateUI(false);
                    }
                }
            });
        }

        // 2. Check Demo State (Persist login across refreshes for demo users)
        if (localStorage.getItem('hcam_demo_user') === 'true') {
            updateUI(true);
        }

        // --- GLOBAL WINDOW EXPORTS (Legacy Support) ---

        window.analyzeProject = async function() {
            const details = document.getElementById('projectDetails').value;
            const sector = document.getElementById('industrySector').value;
            const container = document.getElementById('aiResponseContainer');
            const output = document.getElementById('aiResponseText');

            if (!details) {
                alert("Input Required: Please provide specific mission details to initiate the feasibility analysis.");
                return;
            }

            // Show loading state
            container.classList.remove('hidden');
            output.innerHTML = '<div class="flex items-center gap-2 text-blue-300"><i class="fas fa-circle-notch fa-spin"></i> Processing H.CAM technical assessment...</div>';
           
            // Auto-scroll to the response
            container.scrollIntoView({ behavior: 'smooth', block: 'nearest' });

            const apiKey = GROQ_API_KEY;
           
            if (!apiKey) {
                output.innerHTML = `<div class="p-4 bg-red-900/20 border border-red-500/50 rounded-lg text-red-200 text-sm"><i class="fas fa-key mr-2"></i><strong>Configuration Error:</strong> No API Key found. Please add your key to the 'GROQ_API_KEY' variable in the script.</div>`;
                return;
            }

            const prompt = `You are a Senior Technical Consultant for H.CAM Autonomous Systems.
            A potential client has submitted a project request: "${details}".
            Target Sector: "${sector}".
           
            Reference Pricing:
            - Rescue Module: RM 6,500
            - Agri Module: RM 4,500
            - Manu Module: RM 5,500
            - H.CAM Ultra (All Modules): RM 15,500

            **Evaluation Protocols:**
            1. **Feasibility Analysis:** Evaluate if the H.CAM hardware (drones, grippers, sensors) can technically perform the requested task.
            2. **Operational Integrity:** H.CAM is a professional industrial tool. If the request is clearly for pure entertainment, toys, pranks, or is physically impossible (e.g., lifting impossible weights), you must answer "No" and explain professionally that this unit is for serious operational use only.
            3. **Constructive Feedback:** For unusual but potentially viable professional use cases, be open-minded but realistic about technical limitations.

            **Report Structure (Use Markdown, Do NOT use Emojis):**
            **1. Feasibility (Yes/No):** (Start strictly with "Yes" or "No". Then provide the rationale).
            **2. Estimated Investment:** (Quote the price in RM based on the selected module).
            **3. System Application:** (Describe how the H.CAM unit executes the mission).
            **4. Technical Complexity:** (Low, Medium, or High).
           
            Keep the language professional, concise, and objective.`;

            try {
                // Switched from Google Gemini to Groq API
                const response = await fetch('https://api.groq.com/openai/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${apiKey}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        model: "llama-3.3-70b-versatile", // Using Llama 3.3 for best performance
                        messages: [
                            { role: "system", content: "You are a helpful AI assistant." },
                            { role: "user", content: prompt }
                        ]
                    })
                });

                const data = await response.json();
               
                if (data.error) {
                    throw new Error(data.error.message);
                }

                // Groq/OpenAI response format
                const rawText = data.choices[0].message.content;
               
                // Simple markdown parsing for bold and newlines
                const formattedText = rawText
                    .replace(/\*\*(.*?)\*\*/g, '<strong class="text-blue-200">$1</strong>')
                    .replace(/\n/g, '<br>');

                output.innerHTML = formattedText;

            } catch (error) {
                output.innerHTML = `<div class="p-4 bg-red-900/20 border border-red-500/50 rounded-lg text-red-200 text-sm"><i class="fas fa-exclamation-triangle mr-2"></i><strong>System Error:</strong> Unable to connect to the AI Architect service. Please check your network connection or try again later. (${error.message})</div>`;
            }
        };

        window.askTriCoreAI = async function() {
            const topic = document.getElementById('aiTopic').value;
            const question = document.getElementById('aiQuestion').value;
            const container = document.getElementById('aiQAResponse');
            const output = document.getElementById('aiQAText');

            if (!question) {
                alert("Please type a question first.");
                return;
            }

            // Show loading
            container.classList.remove('hidden');
            output.innerHTML = '<span class="animate-pulse">Consulting H.CAM technical database...</span>';

            const apiKey = GROQ_API_KEY;
           
            if (!apiKey) {
                output.innerHTML = `<span class="text-red-400">Configuration Error: API Key missing.</span>`;
                return;
            }

            const prompt = `You are a friendly and simple AI assistant for H.CAM.
            The user is asking a question about: "${topic}".
            User Question: "${question}"

            Context on H.CAM:
            We have ONE drone (The H.CAM) that is modular.
            1. Rescue: It attaches a winch and thermal camera.
            2. Agriculture: It attaches a sprayer and crop sensors.
            3. Manufacturing: It attaches a robotic gripper claw.
            It is the same drone, just different attachments!

            Instructions:
            1. If the question can be answered with Yes or No, start immediately with "Yes," or "No,".
            2. Then, explain *why* simply. Mention how the drone swaps modules.
            3. Add one or two sentences telling them more about how it works.
            4. Do not use complicated words or jargon. Explain it like you are talking to a student.`;

            try {
                // Switched from Google Gemini to Groq API
                const response = await fetch('https://api.groq.com/openai/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${apiKey}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        model: "llama-3.3-70b-versatile", // Using Llama 3.3 for best performance
                        messages: [
                            { role: "system", content: "You are a helpful AI assistant." },
                            { role: "user", content: prompt }
                        ]
                    })
                });

                const data = await response.json();
                if (data.error) throw new Error(data.error.message);
               
                // Groq/OpenAI response format
                output.innerText = data.choices[0].message.content;

            } catch (error) {
                output.innerHTML = `<span class="text-red-400">Connection error: ${error.message}</span>`;
            }
        };

        window.handleFormSubmit = function() {
            // Get form values
            const name = document.getElementById('userName').value;
            const email = document.getElementById('userEmail').value;
            const sector = document.getElementById('industrySector').value;
            const details = document.getElementById('projectDetails').value;

            // Construct email content
            const recipient = "m-11805481@moe-dl.edu.my";
            const subject = encodeURIComponent(`New H.CAM Drone Request: ${sector}`);
            const body = encodeURIComponent(
`Name: ${name}
Client Email: ${email}
Module Requested: ${sector}

Mission Requirements:
${details}

--
Sent via H.CAM Portal`
            );

            // Trigger mailto link
            window.location.href = `mailto:${recipient}?subject=${subject}&body=${body}`;
           
            // Notify user
            alert('System Notice: Launching your default email client to finalize the formal request to: ' + recipient);
        };

        window.openSpecs = function(type) {
            const modal = document.getElementById('specsModal');
            const title = document.getElementById('modal-title');
            const content = document.getElementById('modal-content');
           
            // Define data here or access from global if needed, keeping simple for module scope
            const specsData = {
                rescue: {
                    title: '<i class="fas fa-heart-pulse text-red-500 mr-2"></i>H.CAM: Rescue Config',
                    content: `
                        <ul class="space-y-3 text-sm text-slate-300">
                            <li class="flex justify-between border-b border-slate-700 pb-2"><span>Frame Mode</span> <span class="text-red-400 font-mono font-bold">H.CAM X (Heavy Lift)</span></li>
                            <li class="flex justify-between border-b border-slate-700 pb-2"><span>Module Attached</span> <span class="text-red-400 font-mono font-bold">Winch + Thermal Pod</span></li>
                            <li class="flex justify-between border-b border-slate-700 pb-2"><span>Lift Capacity</span> <span class="text-red-400 font-mono font-bold">120kg</span></li>
                            <li class="flex justify-between border-b border-slate-700 pb-2"><span>Active Time</span> <span class="text-red-400 font-mono font-bold">45 mins (High Torque)</span></li>
                        </ul>
                    `
                },
                agri: {
                    title: '<i class="fas fa-seedling text-green-500 mr-2"></i>H.CAM: Agri Config',
                    content: `
                        <ul class="space-y-3 text-sm text-slate-300">
                            <li class="flex justify-between border-b border-slate-700 pb-2"><span>Frame Mode</span> <span class="text-green-400 font-mono font-bold">H.CAM X (Endurance)</span></li>
                            <li class="flex justify-between border-b border-slate-700 pb-2"><span>Module Attached</span> <span class="text-green-400 font-mono font-bold">Sprayer + Spectral Cam</span></li>
                            <li class="flex justify-between border-b border-slate-700 pb-2"><span>Coverage</span> <span class="text-green-400 font-mono font-bold">2 acres/hour</span></li>
                            <li class="flex justify-between border-b border-slate-700 pb-2"><span>Active Time</span> <span class="text-green-400 font-mono font-bold">60 mins (Solar Assist)</span></li>
                        </ul>
                    `
                },
                manu: {
                    title: '<i class="fas fa-industry text-blue-500 mr-2"></i>H.CAM: Manu Config',
                    content: `
                        <ul class="space-y-3 text-sm text-slate-300">
                            <li class="flex justify-between border-b border-slate-700 pb-2"><span>Frame Mode</span> <span class="text-blue-400 font-mono font-bold">H.CAM X (Indoor)</span></li>
                            <li class="flex justify-between border-b border-slate-700 pb-2"><span>Module Attached</span> <span class="text-blue-400 font-mono font-bold">Robotic Gripper + LiDAR</span></li>
                            <li class="flex justify-between border-b border-slate-700 pb-2"><span>Carry Load</span> <span class="text-blue-400 font-mono font-bold">15kg (Precision)</span></li>
                            <li class="flex justify-between border-b border-slate-700 pb-2"><span>Active Time</span> <span class="text-blue-400 font-mono font-bold">24/7 (Wireless Dock)</span></li>
                        </ul>
                    `
                }
            };
           
            if (specsData[type]) {
                title.innerHTML = specsData[type].title;
                content.innerHTML = specsData[type].content;
                modal.classList.remove('hidden');
                // Prevent background scrolling
                document.body.style.overflow = 'hidden';
            }
        };

        window.closeModal = function() {
            const modal = document.getElementById('specsModal');
            modal.classList.add('hidden');
            // Restore background scrolling
            document.body.style.overflow = 'auto';
        };

        // Dark Mode Logic
        const themeToggleBtn = document.getElementById('theme-toggle');
        const mobileThemeToggleBtn = document.getElementById('mobile-theme-toggle');
       
        // Function to set theme
        function setTheme(isDark) {
            if (isDark) {
                document.documentElement.classList.add('dark');
                localStorage.theme = 'dark';
            } else {
                document.documentElement.classList.remove('dark');
                localStorage.theme = 'light';
            }
        }

        // Toggle handler
        function toggleTheme() {
            const isDark = document.documentElement.classList.contains('dark');
            setTheme(!isDark);
        }

        // Event Listeners
        if (themeToggleBtn) themeToggleBtn.addEventListener('click', toggleTheme);
        if (mobileThemeToggleBtn) mobileThemeToggleBtn.addEventListener('click', toggleTheme);

        // Initialization
        const savedTheme = localStorage.theme;
        const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
       
        if (savedTheme === 'dark' || (!savedTheme && systemDark)) {
            setTheme(true);
        } else {
            setTheme(false);
        }
    </script>
</body>
</html>

